# ğŸ“ æ•°æ®å‡†å¤‡æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©ä½ å‡†å¤‡è®­ç»ƒé“è·¯è£‚ç¼æ£€æµ‹æ¨¡å‹æ‰€éœ€çš„æ•°æ®é›†ã€‚

## ğŸ“š ç›®å½•

1. [æ•°æ®é›†ç»“æ„è¯´æ˜](#æ•°æ®é›†ç»“æ„è¯´æ˜)
2. [æ•°æ®æ ¼å¼è¦æ±‚](#æ•°æ®æ ¼å¼è¦æ±‚)
3. [å¦‚ä½•å‡†å¤‡æ•°æ®](#å¦‚ä½•å‡†å¤‡æ•°æ®)
4. [æ•°æ®é›†åˆ’åˆ†](#æ•°æ®é›†åˆ’åˆ†)
5. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æ•°æ®é›†ç»“æ„è¯´æ˜

### æ ‡å‡†ç›®å½•ç»“æ„

```
data/
â”œâ”€â”€ train/              # è®­ç»ƒé›†ï¼ˆç”¨äºè®­ç»ƒæ¨¡å‹ï¼‰
â”‚   â”œâ”€â”€ images/        # åŸå§‹é“è·¯å›¾ç‰‡
â”‚   â”‚   â”œâ”€â”€ img_001.jpg
â”‚   â”‚   â”œâ”€â”€ img_002.jpg
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ masks/         # å¯¹åº”çš„è£‚ç¼æ ‡æ³¨å›¾
â”‚       â”œâ”€â”€ img_001.jpg
â”‚       â”œâ”€â”€ img_002.jpg
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ val/               # éªŒè¯é›†ï¼ˆç”¨äºè°ƒæ•´æ¨¡å‹ï¼‰
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ masks/
â”‚
â””â”€â”€ test/              # æµ‹è¯•é›†ï¼ˆç”¨äºæœ€ç»ˆè¯„ä¼°ï¼‰
    â”œâ”€â”€ images/
    â””â”€â”€ masks/
```

### ä¸‰ä¸ªæ•°æ®é›†çš„ä½œç”¨

| æ•°æ®é›† | å æ¯” | ä½œç”¨ | è¯´æ˜ |
|--------|------|------|------|
| **è®­ç»ƒé›† (train)** | 70-80% | è®­ç»ƒæ¨¡å‹ | æ¨¡å‹ä»è¿™äº›æ•°æ®ä¸­å­¦ä¹ è£‚ç¼ç‰¹å¾ |
| **éªŒè¯é›† (val)** | 10-15% | è°ƒæ•´å‚æ•° | åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ç›‘æ§æ¨¡å‹è¡¨ç°ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ |
| **æµ‹è¯•é›† (test)** | 10-15% | æœ€ç»ˆè¯„ä¼° | è¯„ä¼°æ¨¡å‹åœ¨æœªè§è¿‡çš„æ•°æ®ä¸Šçš„è¡¨ç° |

ğŸ’¡ **åˆå­¦è€…æç¤º**ï¼šæŠŠæ•°æ®é›†æƒ³è±¡æˆè€ƒè¯•ï¼š
- **è®­ç»ƒé›†** = è¯¾æœ¬ï¼ˆå­¦ä¹ ç”¨ï¼‰
- **éªŒè¯é›†** = è¯¾åä¹ é¢˜ï¼ˆæ£€éªŒå­¦ä¹ æ•ˆæœï¼‰
- **æµ‹è¯•é›†** = æœŸæœ«è€ƒè¯•ï¼ˆæœ€ç»ˆæˆç»©ï¼‰

---

## æ•°æ®æ ¼å¼è¦æ±‚

### 1. å›¾ç‰‡æ ¼å¼

**åŸå§‹å›¾ç‰‡ (images/)**

- **æ ¼å¼**: JPG, JPEG, PNG éƒ½å¯ä»¥
- **å°ºå¯¸**: ä»»æ„ï¼ˆç¨‹åºä¼šè‡ªåŠ¨è°ƒæ•´ä¸º 224Ã—224ï¼‰
- **å†…å®¹**: æ¸…æ™°çš„é“è·¯å›¾ç‰‡
- **å»ºè®®**:
  - åˆ†è¾¨ç‡ä¸ä½äº 224Ã—224
  - å…‰çº¿å……è¶³ã€å¯¹æ¯”åº¦æ¸…æ™°
  - é¿å…è¿‡åº¦æ¨¡ç³Šæˆ–è¿‡æš—

**ç¤ºä¾‹æ–‡ä»¶å**ï¼š
```
road_001.jpg
crack_sample_02.png
street_photo_123.jpeg
```

### 2. æ ‡æ³¨å›¾ç‰‡ (masks/)

**ä»€ä¹ˆæ˜¯ maskï¼ˆæ ‡æ³¨å›¾ï¼‰ï¼Ÿ**

Mask æ˜¯ä¸€å¼ é»‘ç™½å›¾ç‰‡ï¼Œç”¨æ¥æ ‡è®°è£‚ç¼çš„ä½ç½®ï¼š
- **ç™½è‰²åŒºåŸŸ** (255) = è£‚ç¼
- **é»‘è‰²åŒºåŸŸ** (0) = æ­£å¸¸è·¯é¢

**è¦æ±‚**ï¼š
- **æ ¼å¼**: ä¸åŸå›¾ç›¸åŒï¼ˆJPG æˆ– PNGï¼‰
- **å°ºå¯¸**: å¿…é¡»ä¸åŸå›¾å®Œå…¨ä¸€è‡´
- **æ–‡ä»¶å**: å¿…é¡»ä¸åŸå›¾ä¸€ä¸€å¯¹åº”
- **å†…å®¹**: çº¯é»‘ç™½äºŒå€¼å›¾

**ç¤ºä¾‹**ï¼š

```
åŸå›¾: images/road_001.jpg  â†’  æ ‡æ³¨: masks/road_001.jpg
åŸå›¾: images/crack_02.png  â†’  æ ‡æ³¨: masks/crack_02.png
```

### 3. é…å¯¹è§„åˆ™

âœ… **æ­£ç¡®ç¤ºä¾‹**ï¼š
```
images/photo_001.jpg  â†’  masks/photo_001.jpg  âœ“
images/street.png     â†’  masks/street.png     âœ“
```

âŒ **é”™è¯¯ç¤ºä¾‹**ï¼š
```
images/photo_001.jpg  â†’  masks/photo_002.jpg  âœ— (æ–‡ä»¶åä¸åŒ¹é…)
images/road.jpg       â†’  masks/road.png       âœ— (æ‰©å±•åä¸åŒ)
```

---

## å¦‚ä½•å‡†å¤‡æ•°æ®

###  ä½¿ç”¨å…¬å¼€æ•°æ®é›†ï¼ˆæ¨èåˆå­¦è€…ï¼‰

é€‚åˆå¿«é€Ÿå…¥é—¨ï¼Œæ— éœ€è‡ªå·±æ ‡æ³¨ã€‚

#### å¸¸ç”¨å…¬å¼€æ•°æ®é›†

1. **CrackForest Dataset**
   - ä¸‹è½½åœ°å€: https://github.com/cuilimeng/CrackForest-dataset
   - åŒ…å«: 118 å¼ é“è·¯è£‚ç¼å›¾ç‰‡
   - ä¼˜ç‚¹: å·²æ ‡æ³¨å¥½ï¼Œå¯ç›´æ¥ä½¿ç”¨

2. **DeepCrack Dataset**
   - ä¸‹è½½åœ°å€: https://github.com/yhlleo/DeepCrack
   - åŒ…å«: 537 å¼ é«˜åˆ†è¾¨ç‡è£‚ç¼å›¾ç‰‡
   - ä¼˜ç‚¹: æ•°æ®é‡å¤§ï¼Œè´¨é‡é«˜

3. **CRACK500 Dataset**
   - ä¸‹è½½åœ°å€: https://github.com/fyangneil/pavement-crack-detection
   - åŒ…å«: 500 å¼ é“è·¯å›¾ç‰‡
   - ä¼˜ç‚¹: å¤šæ ·æ€§å¥½

#### ä½¿ç”¨æ­¥éª¤

```bash
# 1. ä¸‹è½½æ•°æ®é›†
git clone https://github.com/æ•°æ®é›†åœ°å€

# 2. æ•´ç†åˆ°é¡¹ç›®ç›®å½•
# å°†ä¸‹è½½çš„å›¾ç‰‡å¤åˆ¶åˆ°å¯¹åº”æ–‡ä»¶å¤¹
cp ä¸‹è½½è·¯å¾„/images/* data/train/images/
cp ä¸‹è½½è·¯å¾„/masks/* data/train/masks/

# 3. æ£€æŸ¥æ•°æ®
python check_dataset.py  # åé¢ä¼šæä¾›è¿™ä¸ªè„šæœ¬
```



## æ•°æ®é›†åˆ’åˆ†

### è‡ªåŠ¨åˆ’åˆ†è„šæœ¬

å·²æä¾› `create_val_set.py` è„šæœ¬è‡ªåŠ¨åˆ’åˆ†æ•°æ®é›†ã€‚

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
python create_val_set.py
```

**è„šæœ¬åŠŸèƒ½**ï¼š
- è‡ªåŠ¨å°†æ•°æ®æŒ‰ 80% è®­ç»ƒ / 20% éªŒè¯åˆ’åˆ†
- éšæœºæ‰“ä¹±æ•°æ®ï¼Œç¡®ä¿å¤šæ ·æ€§
- è‡ªåŠ¨å¤åˆ¶æ–‡ä»¶åˆ°å¯¹åº”æ–‡ä»¶å¤¹


## å¸¸è§é—®é¢˜

### Q1: éœ€è¦å¤šå°‘æ•°æ®æ‰èƒ½è®­ç»ƒï¼Ÿ

**æœ€å°‘**ï¼šæ¯ä¸ªç±»åˆ«è‡³å°‘ 50-100 å¼ 
**æ¨è**ï¼š500-1000 å¼ ä»¥ä¸Š
**ç†æƒ³**ï¼šæ•°åƒå¼ 

ğŸ’¡ **æç¤º**ï¼šæ•°æ®è¶Šå¤šï¼Œæ¨¡å‹è¶Šå‡†ç¡®ï¼å¦‚æœæ•°æ®ä¸è¶³ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®å¢å¼ºæŠ€æœ¯ã€‚

### Q2: å›¾ç‰‡å’Œ mask çš„å°ºå¯¸ä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ

ç¨‹åºä¼šè‡ªåŠ¨è°ƒæ•´ä¸º 224Ã—224ï¼Œä½†å»ºè®®ä¿æŒåŸå›¾å’Œ mask å°ºå¯¸ä¸€è‡´ï¼Œä»¥é¿å…å˜å½¢ã€‚

```python
# è°ƒæ•´ mask å°ºå¯¸
from PIL import Image

mask = Image.open('mask.jpg')
original_img = Image.open('image.jpg')

# è°ƒæ•´ mask åˆ°ä¸åŸå›¾ç›¸åŒ
mask_resized = mask.resize(original_img.size)
mask_resized.save('mask_resized.jpg')
```

### Q3: mask ä¸æ˜¯çº¯é»‘ç™½æ€ä¹ˆåŠï¼Ÿ

éœ€è¦äºŒå€¼åŒ–å¤„ç†ï¼š

```python
from PIL import Image
import numpy as np

# è¯»å– mask
mask = Image.open('mask.jpg').convert('L')
mask_array = np.array(mask)

# äºŒå€¼åŒ–ï¼šå¤§äº 127 çš„è®¾ä¸º 255ï¼ˆç™½ï¼‰ï¼Œå¦åˆ™ä¸º 0ï¼ˆé»‘ï¼‰
binary_mask = (mask_array > 127).astype(np.uint8) * 255

# ä¿å­˜
Image.fromarray(binary_mask).save('mask_binary.jpg')
```

### Q4: å¦‚ä½•æ£€æŸ¥æ•°æ®é›†æ˜¯å¦æ­£ç¡®ï¼Ÿ

ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ï¼š

```python
# check_dataset.py
import os
from PIL import Image

def check_dataset(split='train'):
    """æ£€æŸ¥æ•°æ®é›†å®Œæ•´æ€§"""
    img_dir = f'data/{split}/images'
    mask_dir = f'data/{split}/masks'

    images = set(os.listdir(img_dir))
    masks = set(os.listdir(mask_dir))

    print(f"\n=== æ£€æŸ¥ {split} æ•°æ®é›† ===")
    print(f"å›¾ç‰‡æ•°é‡: {len(images)}")
    print(f"æ ‡æ³¨æ•°é‡: {len(masks)}")

    # æ£€æŸ¥é…å¯¹
    missing_masks = images - masks
    missing_images = masks - images

    if missing_masks:
        print(f"âŒ ç¼ºå°‘æ ‡æ³¨çš„å›¾ç‰‡: {missing_masks}")
    if missing_images:
        print(f"âŒ ç¼ºå°‘åŸå›¾çš„æ ‡æ³¨: {missing_images}")

    if not missing_masks and not missing_images:
        print("âœ“ æ•°æ®é›†é…å¯¹æ­£ç¡®ï¼")

    # æ£€æŸ¥å›¾ç‰‡å¯è¯»æ€§
    for img_file in list(images)[:5]:  # æŠ½æŸ¥å‰5å¼ 
        try:
            img = Image.open(os.path.join(img_dir, img_file))
            mask = Image.open(os.path.join(mask_dir, img_file))
            print(f"âœ“ {img_file}: å›¾ç‰‡ {img.size}, æ ‡æ³¨ {mask.size}")
        except Exception as e:
            print(f"âŒ {img_file}: {e}")

# æ£€æŸ¥æ‰€æœ‰æ•°æ®é›†
for split in ['train', 'val', 'test']:
    if os.path.exists(f'data/{split}'):
        check_dataset(split)
```

### Q5: æ ‡æ³¨æ—¶æœ‰ä»€ä¹ˆæŠ€å·§ï¼Ÿ

**æ ‡æ³¨åŸåˆ™**ï¼š
1. âœ… æ²¿è£‚ç¼è¾¹ç¼˜ç²¾ç¡®æ ‡æ³¨
2. âœ… åŒ…å«å®Œæ•´çš„è£‚ç¼åŒºåŸŸ
3. âœ… ä¿æŒä¸€è‡´çš„æ ‡æ³¨æ ‡å‡†
4. âŒ é¿å…æ ‡æ³¨æ¨¡ç³ŠåŒºåŸŸ
5. âŒ ä¸è¦æ¼æ ‡æ˜æ˜¾è£‚ç¼

**æ•ˆç‡æŠ€å·§**ï¼š
- ä½¿ç”¨å¿«æ·é”®åŠ é€Ÿæ ‡æ³¨
- å…ˆæ ‡æ³¨å®¹æ˜“çš„ï¼Œå†æ ‡æ³¨å›°éš¾çš„
- å®šæœŸä¼‘æ¯ï¼Œä¿æŒä¸“æ³¨
- å¤šäººæ ‡æ³¨æ—¶ç»Ÿä¸€æ ‡å‡†

---

## ä¸‹ä¸€æ­¥

æ•°æ®å‡†å¤‡å®Œæˆåï¼Œè¯·æŸ¥çœ‹ [æ¨¡å‹è®­ç»ƒæŒ‡å—](./02_æ¨¡å‹è®­ç»ƒæŒ‡å—.md) å¼€å§‹è®­ç»ƒæ¨¡å‹ï¼

---

**æœ‰é—®é¢˜ï¼Ÿ** è¯·æŸ¥çœ‹é¡¹ç›® Issues æˆ–æäº¤æ–°é—®é¢˜ã€‚
